---
layout: base
---

<div class="intro-header"></div>

<div role="main" class="{% if page.full-width %} container-fluid {% else %} container-md {% endif %}">
  {% if page.before-content %}
    <div class="before-content">
      {% for file in page.before-content %}
        {% include {{ file }} %}
      {% endfor %}
    </div>
  {% endif %}

  {{ content }}

  {% if page.after-content %}
    <div class="after-content">
      {% for file in page.after-content %}
        {% include {{ file }} %}
      {% endfor %}
    </div>
  {% endif %}
</div>

<script>
  function setExternalTargets() {
    document.querySelectorAll('a[href^="http"]').forEach(link => {
      try {
        const u = new URL(link.href, window.location.origin);
        if (u.hostname !== window.location.hostname) {
          link.setAttribute('target', '_blank');
          link.setAttribute('rel', 'noopener noreferrer');
        }
      } catch (e) { /* ignore malformed URLs */ }
    });
  }

  // Run after initial load
  window.addEventListener('DOMContentLoaded', setExternalTargets);

  // If you use Turbo/PJAX/InstantClick/etc., re-run after page swaps:
  document.addEventListener('turbo:load', setExternalTargets);
</script>
